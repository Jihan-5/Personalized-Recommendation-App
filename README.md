# Personalized Discovery App

This is a production-grade, personalized discovery application built on Next.js (Vercel) and Supabase. It features three distinct modes (NFT, Shopping, Media), a personalized feed, natural language search, and robust user features like saved items and follow alerts.

## Features

*   **Multi-Mode Discovery**: Seamlessly switch between NFT, Shopping, and Media content.
*   **Personalized Feed**: A dynamic feed of items tailored to your interests, powered by vector embeddings and a multi-armed bandit for A/B testing.
*   **Natural Language Search**: Find exactly what you're looking for with semantic search, enhanced by filters.
*   **Why This?**: Understand why an item was recommended to you.
*   **Item Details**: View item summaries (generated by an LLM), trend sparklines, and similar items.
*   **Follow & Alerts**: Keep track of creators or collections and get notified (stubbed).
*   **Offline Saved Items**: Save items for later and search them even when you're offline, thanks to IndexedDB.
*   **Admin Dashboard**: Monitor key metrics like A/B test performance, system latency, cost, and basic fraud flags.
*   **Wallet Integration**: Connect your wallet in NFT mode using RainbowKit and wagmi.

## Tech Stack

*   **Frontend**: Next.js 14 (App Router), TypeScript, Tailwind CSS, shadcn/ui, React Query, Zustand
*   **Backend**: Supabase (Postgres, Auth, Edge Functions)
*   **Vector Database**: Supabase `pgvector`
*   **AI/LLM**: OpenAI for embeddings and content summarization
*   **Web3**: wagmi, viem, RainbowKit for wallet connectivity

---

## Setup & Deployment

### 1. Project Setup

**Clone the repository:**

```bash
git clone <your-repo-url>
cd <your-repo-name>
```

**Install dependencies:**

```bash
npm install
```

### 2. Supabase Setup

**Create a Supabase Project:**

1.  Go to [supabase.com](https://supabase.com) and create a new project.
2.  Keep your **Project URL** and **`anon` key** handy. You'll need them for the environment variables.

**Set up the Database:**

1.  In the Supabase dashboard, navigate to the **SQL Editor**.
2.  Copy the contents of the files in `/supabase/sql/` and execute them in order:
    *   `01_schema.sql`
    *   `02_policies.sql`
    *   `03_indexes.sql`
    *   `04_rpcs.sql`

**Deploy Edge Functions:**

1.  Install the Supabase CLI: `npm install supabase --save-dev`
2.  Link your project: `npx supabase login` followed by `npx supabase link --project-ref <your-project-id>`
3.  Deploy the functions: `npx supabase functions deploy`

### 3. Environment Variables

Create a `.env.local` file in the root of the project by copying `.env.example`:

```bash
cp .env.example .env.local
```

Fill in the required values:

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL="YOUR_SUPABASE_PROJECT_URL"
NEXT_PUBLIC_SUPABASE_ANON_KEY="YOUR_SUPABASE_ANON_KEY"
SUPABASE_SERVICE_ROLE_KEY="YOUR_SUPABASE_SERVICE_ROLE_KEY" # Found in your Supabase project's API settings

# OpenAI
OPENAI_API_KEY="sk-..." # Your OpenAI API key for embeddings and summaries

# RainbowKit (Wallet Connect)
NEXT_PUBLIC_RAINBOWKIT_PROJECT_ID="YOUR_WALLETCONNECT_PROJECT_ID" # Get one from https://cloud.walletconnect.com/
```

### 4. Seed the Database

To populate your app with sample data, run the seeding script. This script requires Node.js and `ts-node`.

```bash
# Install ts-node if you haven't already
npm install -g ts-node

# Run the seed script
npx ts-node --require tsconfig-paths/register scripts/seed/seed_items.ts
```

This will generate items, create embeddings via the `embed-item` Edge Function, and populate your database.

### 5. Running the App Locally

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) to see your app running.

### 6. Deployment

**Frontend (Next.js):**

1.  Push your code to a Git provider (GitHub, GitLab, etc.).
2.  Go to [vercel.com](https://vercel.com) and import your Git repository.
3.  Vercel will automatically detect that you're using Next.js.
4.  Add your environment variables from `.env.local` to the Vercel project settings.
5.  Click **Deploy**.

**Backend (Supabase):**

Your Supabase backend is already live. The database schema and Edge Functions were deployed in the setup steps.